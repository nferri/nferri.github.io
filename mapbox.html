<!DOCTYPE html>
    <html>
        <head>

        <title>Mapbox Labs</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="assets/css/main.css" />
        <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
        
        </head>

  <body class="is-preload">

    <!-- Wrapper -->
      <div id="wrapper">

        <!-- Header -->
          <header id="header">
            <a href="index.html" class="logo">Natalie Ferri</a>
          </header>

        <!-- Nav -->
          <nav id="nav">
            <ul class="links">
              <li class="active"><a href="index.html">Home</a></li>
              <li><a href="mapbox.html">Earthquakes</a></li>
              <li><a href="map.html">Tweeting</a></li>
              <li><a href="resume.html">Resume</a></li>
            </ul>
          </nav>

    <style>
            #map { position: center
                    width: 100%; 
                    height: 700px;
                    background-color: white; }
    </style>
        </head>
    
    <body>
 
            <!-- Main -->
          <div id="main">

            <!-- Post -->
              <section class="post">
                <header class="major">


    <h2 style="color:maroon;">Earthquakes & More</h2>
    <p><strong>Each Trump image depicts a tweet or comment President Donald Trump has said about or to another country.  The countries in <span style="color: blue">blue</span> are those supporting Trump's presidency, <span style="color: gold">yellow</span> are neutral, while those in <span style="color: red">red</span> do not support Trump's presidency. Click around to see the world through Trump's platform!</strong></p>

    <div id='map'></div>
        <script>
            //map token
        mapboxgl.accessToken = 'pk.eyJ1IjoibmZlcnJpIiwiYSI6ImNqbzA4amwzdzBiOWszdnFmbjRwcDAwbnAifQ.WGVeV7RnIWMf3DSZTXdwlQ';


        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/nferri/cjo6jst8z1ed82sqn10m048e1',
            center: [39.000000, 26.431230],
            zoom: 1.0
        });
        
        //on load map info
            map.on('load', function(){
                //add a source layer for earthquakes
                map.addSource('earthquakes', {
                    "type": "geojson",
                    "data": "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_week.geojson"
                });
                //add the earthquakes to the map
                map.addLayer({
                    "id":"equakes",
                    "type":"circle",
                    "source":"earthquakes"
                });

                //add a handler for clicking/popups 
                //Thanks to: https://www.mapbox.com/mapbox-gl-js/example/popup-on-click/ 
                map.on('click', 'equakes', function (e) {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var description = e.features[0].properties.mag;

                    // Ensure that if the map is zoomed out such that multiple
                    // copies of the feature are visible, the popup appears
                    // over the copy being pointed to.
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
                    //make the popup
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(description)
                        .addTo(map);

                });
            });


        </script>
 
        <button onclick="goBack()">Return</button>
        <script>

        function goBack() {
        window.history.back();
        }

        </script>

 <!-- Scripts -->
      <script src="assets/js/jquery.min.js"></script>
      <script src="assets/js/jquery.scrollex.min.js"></script>
      <script src="assets/js/jquery.scrolly.min.js"></script>
      <script src="assets/js/browser.min.js"></script>
      <script src="assets/js/breakpoints.min.js"></script>
      <script src="assets/js/util.js"></script>
      <script src="assets/js/main.js"></script>

  </body>
</html>