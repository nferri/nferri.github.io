<!DOCTYPE html>
    <!--
  Story by HTML5 UP
  html5up.net | @ajlkn
  Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
  -->
  <html>
        <head>

        <title>Mapbox Labs</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
      <link rel="stylesheet" href="assets/css/main.css" />
     <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
  </head>
  <body class="is-preload">

    <!-- Wrapper -->
      <div id="wrapper">

        <!-- Header -->
          <header id="header">
            <a href="index.html" class="logo">Natalie Ferri</a>
          </header>

        <!-- Nav -->
          <nav id="nav">
            <ul class="links">
              <li class="active"><a href="index.html">Home</a></li>
              <li><a href="TacomaFP.html">Tacoma Flood Plains</a></li>
              <li><a href="map.html">Tweeting</a></li>
              <li><a href="resume.html">Resume</a></li>
            </ul>
          </nav>

        <script src='https://api.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js'></script>
        <link href='https://api.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css' rel='stylesheet' />

      </div>

    <body>
 
    <!-- Main -->
          <div id="main">

     <!-- Post -->
              <section class="post">
              <header class="major">

    <!-- Map1 -->

    <h2 style="color:maroon;">Weather-based Destruction</h2></header>
    <h2 style="color:maroon;">Earthquakes</h2>
    <p><strong>Earthquakes and fires cause chaos. <span style="color: blue">Significant earthquakes in the past 30 days</span> Then there are fires burning <span style="color: red">red</span> and things are heating up!</strong></p>

    <div id='map' style='width:100%; width:600px'></div>
        <script>
            //map token
        mapboxgl.accessToken = 'pk.eyJ1IjoibmZlcnJpIiwiYSI6ImNqbzA4amwzdzBiOWszdnFmbjRwcDAwbnAifQ.WGVeV7RnIWMf3DSZTXdwlQ';

      var map = new mapboxgl.Map({
      container: 'map',
          style: 'mapbox://styles/nferri/cjobs0q0h1b4x2so6m1qzgjw9',
          center: [39.240000, 26.000000],
          zoom: 1.0
      });
        
        //on load map info
            map.on('load', function(){
                //add a source layer for earthquakes
                map.addSource('earthquakes', {
                    "type": "geojson",
                    "data": "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/significant_month.geojson"
                });
                //add the earthquakes to the map
                map.addLayer({
                    "id":"equakes",
                    "type":"circle",
                    "source":"earthquakes"
                });

                //add a handler for clicking/popups 
                //Thanks to: https://www.mapbox.com/mapbox-gl-js/example/popup-on-click/ 
                map.on('click', 'equakes', function (e) {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var description = e.features[0].properties.mag;

                    // Ensure that if the map is zoomed out such that multiple
                    // copies of the feature are visible, the popup appears
                    // over the copy being pointed to.
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }
                    //make the popup
                    new mapboxgl.Popup()
                        .setLngLat(coordinates)
                        .setHTML(description)
                        .addTo(map);

                });
                });
</script>

      </section>

      </script>
        </div>

        <button onclick="goBack()">Return</button>
        <script>

        function goBack() {
        window.history.back();
        }

        </script>
</section>

 <!-- Scripts -->
      <script src="assets/js/jquery.min.js"></script>
      <script src="assets/js/jquery.scrollex.min.js"></script>
      <script src="assets/js/jquery.scrolly.min.js"></script>
      <script src="assets/js/browser.min.js"></script>
      <script src="assets/js/breakpoints.min.js"></script>
      <script src="assets/js/util.js"></script>
      <script src="assets/js/main.js"></script>

  </body>
</html>


